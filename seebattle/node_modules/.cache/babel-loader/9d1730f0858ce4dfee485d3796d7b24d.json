{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP_USER\\\\Desktop\\\\diploma\\\\Diploma\\\\seebattle\\\\src\\\\components\\\\LoginComponent.jsx\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.gohome = () => {\n      this.props.history.replace(\"/\");\n    };\n\n    this.initialState = {\n      email: '',\n      password: '',\n      error: ''\n    };\n\n    this.credentialChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.validateUser = () => {\n      const credentials = JSON.stringify({\n        email: this.state.email,\n        password: this.state.password\n      });\n      axios.post(\"http://localhost:9090/api/v1/auth/authenticate\", credentials, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        let data = response.data;\n        console.log(data.token);\n        localStorage.setItem('jwtToken', data.token);\n        localStorage.setItem('uid', data.id);\n        localStorage.setItem('role', data.role);\n        this.gohome();\n      }).catch(error => {\n        this.resetLoginForm();\n        this.setState({\n          \"error\": \"Invalid email and password\"\n        });\n      });\n    };\n\n    this.resetLoginForm = () => {\n      this.setState(() => this.initialState);\n    };\n\n    this.state = this.initialState;\n  }\n\n  render() {\n    const {\n      email,\n      password,\n      error\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login page\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 300\n          },\n          children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-danger\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 31\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              action: \"/login\",\n              method: \"post\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control\",\n                  required: true,\n                  autoComplete: \"off\",\n                  type: \"text\",\n                  name: \"email\",\n                  value: email,\n                  onChange: this.credentialChange,\n                  placeholder: \"Enter Email Address\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control\",\n                  required: true,\n                  autoComplete: \"off\",\n                  type: \"password\",\n                  name: \"password\",\n                  value: password,\n                  onChange: this.credentialChange,\n                  placeholder: \"Enter Password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 67,\n                  columnNumber: 30\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary\",\n                size: \"sm\",\n                type: \"button\",\n                variant: \"success\",\n                onClick: this.validateUser,\n                disabled: this.state.email.length === 0 || this.state.password.length === 0,\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(Login);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["C:/Users/HP_USER/Desktop/diploma/Diploma/seebattle/src/components/LoginComponent.jsx"],"names":["React","Component","withRouter","axios","Login","constructor","props","gohome","history","replace","initialState","email","password","error","credentialChange","event","setState","target","name","value","validateUser","credentials","JSON","stringify","state","post","headers","then","response","data","console","log","token","localStorage","setItem","id","role","catch","resetLoginForm","render","width","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {withRouter} from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nclass Login extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = this.initialState;\r\n    }\r\n    gohome = () => {\r\n        this.props.history.replace(\"/\");\r\n    };\r\n\r\n    initialState = {\r\n        email:'', password:'', error:''\r\n    };\r\n\r\n    credentialChange = event => {\r\n        this.setState({\r\n            [event.target.name] : event.target.value\r\n        });\r\n    };\r\n\r\n    validateUser = () => {\r\n        const credentials = JSON.stringify({\r\n            email: this.state.email,\r\n            password: this.state.password\r\n        });\r\n        axios.post(\"http://localhost:9090/api/v1/auth/authenticate\", credentials, {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            }\r\n        }).then(response => {\r\n                let data = response.data;\r\n                console.log(data.token);\r\n                localStorage.setItem('jwtToken', data.token);\r\n                localStorage.setItem('uid', data.id);\r\n                localStorage.setItem('role', data.role);\r\n                this.gohome();\r\n            })\r\n            .catch(error => {\r\n                this.resetLoginForm();\r\n                this.setState({\"error\":\"Invalid email and password\"});\r\n            });\r\n    };\r\n\r\n    resetLoginForm = () => {\r\n        this.setState(() => this.initialState);\r\n    };\r\n\r\n    render() {\r\n        const {email, password, error} = this.state;\r\n\r\n        return (\r\n            <div className=\"container text-center\">\r\n                <h1>Login page</h1>\r\n                    <div className=\"row justify-content-center\">\r\n                    <div style={{width: 300}}>\r\n                    {error && <div className=\"alert alert-danger\">{error}</div>}\r\n                    <div>\r\n                        <form action=\"/login\" method=\"post\">\r\n                            <div className=\"form-group\">\r\n                                <input className=\"form-control\" required autoComplete=\"off\" type=\"text\" name=\"email\" value={email} onChange={this.credentialChange}\r\n                                            placeholder=\"Enter Email Address\"/>\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                             <input className=\"form-control\" required autoComplete=\"off\" type=\"password\" name=\"password\" value={password} onChange={this.credentialChange}\r\n                                            placeholder=\"Enter Password\"/>\r\n                                 \r\n                            </div>\r\n                            <button className=\"btn btn-primary\" size=\"sm\" type=\"button\" variant=\"success\" onClick={this.validateUser}\r\n                                disabled={this.state.email.length === 0 || this.state.password.length === 0}>\r\n                                Login\r\n                            </button>\r\n                            </form>\r\n                    </div>\r\n                    </div>\r\n                    </div>\r\n                </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(Login);"]},"metadata":{},"sourceType":"module"}